:root {
  --cx-primary: #6F29B1;
  --cx-light: #F9F2FD;
  --cx-yellow: #E3F89D;
  --cx-shade: #CBBFD2;
  --bpo-primary: #A0ADD6;
  --bpo-dark: #1F1E3A;
  --bpo-accent: #78EED6;
  --text-light: #FFFFFF;
  --text-dark: #000000;
  --bg-space: #141f4f;
  --page-bg: var(--bg-space);
  --page-bloom-1: rgba(62,195,247,0.24);
  --page-bloom-2: rgba(186,24,255,0.21);
  --brand-primary: #3ec3f7;
  --brand-accent: #ba18ff;
  --brand-soft: #EAFBFF;
  --brand-bg1: #172a68;
  --brand-bg2: #0b1032;
  --brand-primary-a: rgba(62,195,247,0.28);
  --brand-accent-a: rgba(186,24,255,0.28);
  --brand-soft-a: rgba(234,251,255,0.22);
  --accent: var(--brand-accent);
  --text-muted: rgba(235, 242, 255, 0.92);
  --muted: rgba(220, 233, 255, 0.90);
  --glass-bg: rgba(255,255,255,0.18);
  --glass-brd: rgba(255,255,255,0.44);
  --glass-bg-soft: rgba(255,255,255,0.10);
  --glass-brd-soft: rgba(255,255,255,0.20);
  --overlay-strength: 0.175;
  --surface-nav: rgba(16, 24, 56, 0.72);
  --surface-hero-a: rgba(20, 28, 64, 0.74);
  --surface-hero-b: rgba(12, 16, 48, 0.84);
  --surface-contact-a: #0f1840;
  --surface-contact-b: #0b1436;
  --theme-transition-duration: 0.55s;
  --theme-transition-ease: cubic-bezier(0.22, 1, 0.36, 1);
  --theme-transition: var(--theme-transition-duration) var(--theme-transition-ease);
}

* { box-sizing: border-box; }
html { scroll-behavior: smooth; }
body {
  font-family: 'IBM Plex Sans', 'Segoe UI', sans-serif;
  background:
    radial-gradient(1200px 800px at 15% 10%, var(--page-bloom-1), transparent 60%),
    radial-gradient(1000px 700px at 85% 30%, var(--page-bloom-2), transparent 55%),
    var(--page-bg);
  color: var(--text-light);
  line-height: 1.6;
  overflow-x: hidden;
  position: relative;
  padding-top: 82px;
  transition: background var(--theme-transition), color var(--theme-transition);
}
h1, h2, h3, h4, h5, h6 { font-family: 'Montserrat', 'IBM Plex Sans', sans-serif; letter-spacing: 0.3px; }
h2.fw-bold, h3.fw-bold { position: relative; display: inline-block; }
h2.fw-bold::after, h3.fw-bold::after {
  content: "";
  display: block;
  height: 4px;
  width: 74%;
  margin-top: 10px;
  border-radius: 999px;
  background: linear-gradient(90deg, var(--brand-accent), var(--brand-primary), transparent);
  box-shadow: 0 0 24px var(--brand-accent-a);
  transition: background var(--theme-transition), box-shadow var(--theme-transition);
}
a { color: var(--accent); }
a:hover { color: var(--brand-accent); }
.text-secondary { color: var(--text-muted) !important; transition: color var(--theme-transition); }

.grain {
  pointer-events: none;
  position: fixed;
  inset: 0;
  z-index: 1;
  background-image:
    radial-gradient(1px 1px at 20% 20%, rgba(255,255,255,0.07), transparent),
    radial-gradient(1px 1px at 40% 70%, rgba(255,255,255,0.05), transparent),
    radial-gradient(1px 1px at 80% 30%, rgba(255,255,255,0.05), transparent);
  opacity: 0.18;
}
.vignette {
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(circle at center, transparent 50%, rgba(0,0,0,var(--overlay-strength)));
  z-index: 0;
  transition: background var(--theme-transition);
}

.navbar {
  background: var(--surface-nav);
  backdrop-filter: blur(14px);
  border-bottom: 1px solid rgba(255,255,255,0.18);
  z-index: 100;
  transition: border-color var(--theme-transition), background var(--theme-transition);
}
.nav-link { color: var(--text-light) !important; transition: color .4s ease; }
.nav-link.active, .nav-link:hover { color: var(--brand-accent) !important; }
.chapter-indicator {
  position: fixed;
  right: 18px;
  top: 40%;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  gap: 8px;
  z-index: 98;
}
.chapter-indicator button {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  border: 1px solid rgba(255,255,255,0.35);
  background: transparent;
  transition: all .2s ease;
}
.chapter-indicator button.active {
  background: var(--brand-accent);
  border-color: var(--brand-accent);
  transform: scale(1.1);
  box-shadow: 0 0 18px var(--brand-accent-a);
}

.reveal { opacity: 0; transform: translate3d(0,24px,0); transition: opacity .8s ease, transform .9s ease; }
.reveal.in { opacity: 1; transform: translate3d(0,0,0); }
.reveal[data-reveal="left"] { transform: translate3d(-48px,0,0); }
.reveal[data-reveal="right"] { transform: translate3d(48px,0,0); }
.reveal[data-reveal="up"] { transform: translate3d(0,-48px,0); }
.reveal[data-reveal="down"] { transform: translate3d(0,48px,0); }
.reveal[data-reveal="zoom"] { transform: scale(0.94); }

.section-block { position: relative; padding: 110px 0; }
.chapter-label {
  font-size: 0.8rem;
  letter-spacing: 2px;
  text-transform: uppercase;
  color: var(--muted);
  margin-bottom: 8px;
}
.glass {
  background: var(--glass-bg);
  border: 1px solid var(--glass-brd);
  border-radius: 18px;
  box-shadow: 0 16px 40px rgba(0,0,0,0.22), inset 0 1px 0 rgba(255,255,255,0.12);
  backdrop-filter: blur(12px);
  transition: background var(--theme-transition), border-color var(--theme-transition), box-shadow var(--theme-transition);
}
@supports not (backdrop-filter: blur(2px)) {
  .glass { background: rgba(255,255,255,0.18); }
}
.floating-orb {
  position: absolute;
  border-radius: 999px;
  filter: blur(10px) drop-shadow(0 0 26px var(--brand-accent-a));
  opacity: 0.38;
  animation: floaty 10s ease-in-out infinite;
  background: radial-gradient(circle at 30% 30%, var(--brand-accent), var(--brand-soft));
  transition: background var(--theme-transition), opacity var(--theme-transition), filter var(--theme-transition);
}
@keyframes floaty { 0%,100%{ transform: translate3d(0,0,0);} 50%{ transform: translate3d(0,-16px,0);} }

#hero {
  position: relative;
  min-height: 100vh;
  display: flex;
  align-items: center;
  overflow: hidden;
  background: linear-gradient(120deg, var(--surface-hero-a), var(--surface-hero-b));
  transition: background var(--theme-transition);
}
#hero-vanta { position:absolute; inset:0; }
.hero-overlay {
  position:absolute;
  inset:0;
  background: linear-gradient(
    180deg,
    rgba(0,0,0, calc(var(--overlay-strength) * 1.25)),
    rgba(0,0,0, calc(var(--overlay-strength) * 1.95))
  );
  z-index:1;
  transition: background var(--theme-transition);
}
.hero-fade { position:absolute; bottom:0; left:0; right:0; height:160px; background: linear-gradient(180deg, rgba(0,0,0,0), var(--bg-space)); z-index:2; }
.hero-content { position: relative; z-index:3; }
.hud-chip {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 14px;
  border-radius: 999px;
  border: 1px solid var(--brand-accent);
  background: linear-gradient(135deg, rgba(255,255,255,0.14), rgba(255,255,255,0.08));
  color: var(--text-light);
  font-size: 0.9rem;
  box-shadow: 0 0 0 1px rgba(255,255,255,0.06), 0 0 18px var(--brand-accent-a);
  transition: border-color var(--theme-transition), background var(--theme-transition), color var(--theme-transition), box-shadow var(--theme-transition);
}
.floating-hud {
  position: absolute;
  z-index: 3;
  font-size: 0.8rem;
  letter-spacing: 1px;
  padding: 10px 14px;
  border-radius: 12px;
  border: 1px solid var(--glass-brd-soft);
  background: rgba(0,0,0, calc(var(--overlay-strength) * 1.75));
  backdrop-filter: blur(8px);
  box-shadow: 0 10px 26px rgba(0,0,0,0.22), inset 0 1px 0 rgba(255,255,255,0.10);
  transition: background var(--theme-transition), border-color var(--theme-transition), box-shadow var(--theme-transition), color var(--theme-transition);
}

.stack-banner {
  border-radius: 16px;
  overflow: hidden;
  border: 1px solid var(--glass-brd-soft);
  box-shadow: 0 18px 36px rgba(0,0,0,0.26);
  transition: border-color var(--theme-transition), box-shadow var(--theme-transition);
}
.brand-pill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  border-radius: 999px;
  border: 1px solid var(--brand-accent);
  background: rgba(255,255,255,0.09);
  color: var(--text-light);
  text-decoration: none;
  transition: transform .2s ease, border-color .2s ease, background var(--theme-transition), color var(--theme-transition), box-shadow var(--theme-transition);
}
.brand-pill:hover { transform: translateY(-3px); border-color: var(--brand-primary); background: rgba(255,255,255,0.12); }
.brand-pill.is-active {
  background: linear-gradient(135deg, var(--brand-primary), var(--brand-accent));
  border-color: var(--brand-accent);
  color: #0b0d17;
  box-shadow: 0 0 0 1px var(--brand-accent), 0 0 26px var(--brand-accent-a);
}

.capability {
  padding: 18px;
  border-radius: 14px;
  background: var(--glass-bg-soft);
  border: 1px solid var(--glass-brd-soft);
  height: 100%;
  transition: background var(--theme-transition), border-color var(--theme-transition);
}

.story-section { position: relative; overflow: hidden; --storyShift: 0; }
.story-section::after {
  content:"";
  position:absolute; inset:0;
  background: radial-gradient(circle at 30% 20%, rgba(107,214,255,0.15), transparent 40%), radial-gradient(circle at 70% 70%, rgba(255,159,67,0.14), transparent 45%);
  opacity: calc(0.23 + (var(--storyShift) * 0.0010));
  transform: translate3d(0, calc(var(--storyShift) * -0.1px), 0);
  pointer-events:none;
  z-index:0;
}

.chapter {
  min-height: 95vh;
  position: relative;
  overflow: hidden;
  padding: 120px 0;
}
.chapter .logo { max-width: 180px; }
.flip-wrap { perspective: 1000px; }
.flip { position: relative; width: 100%; min-height: 200px; transform-style: preserve-3d; transition: transform .8s ease; }
.flip-wrap:hover .flip { transform: rotateY(180deg); }
.flip-face {
  position: absolute; inset: 0; backface-visibility: hidden;
  border-radius: 14px; padding: 16px;
  background: var(--glass-bg-soft);
  border: 1px solid var(--glass-brd-soft);
  display: flex; flex-direction: column; justify-content: center;
  transition: background var(--theme-transition), border-color var(--theme-transition);
}
.flip-back { transform: rotateY(180deg); }

/* Scene signatures */
.pulse-line {
  height: 3px;
  width: 120px;
  background: linear-gradient(90deg, transparent, var(--brand-accent), transparent);
  animation: pulse 1.8s ease-in-out infinite;
  border-radius: 999px;
  filter: drop-shadow(0 0 18px var(--brand-accent-a));
  transition: background var(--theme-transition), filter var(--theme-transition);
}
@keyframes pulse { 0%,100%{opacity:.2;} 50%{opacity:1;} }
.orbit-card {
  position: relative;
  overflow: hidden;
}
.orbit-card::after {
  content:"";
  position:absolute;
  inset:-60%;
  background: radial-gradient(circle at 50% 50%, var(--brand-accent), transparent 55%);
  animation: orbit 8s linear infinite;
  opacity:0.26;
}
@keyframes orbit { from{transform: rotate(0deg);} to{transform: rotate(360deg);} }
.ticker {
  font-variant-numeric: tabular-nums;
  display: inline-block;
  animation: ticker 2s ease-in-out infinite;
}
@keyframes ticker { 0%{transform: translateY(8px); opacity:.5;} 50%{transform: translateY(0); opacity:1;} 100%{transform: translateY(8px); opacity:.5;} }
.hud-rotate {
  position: relative;
  overflow: hidden;
}
.hud-rotate::after {
  content:"";
  position:absolute;
  inset:-30%;
  border: 1px solid var(--brand-accent);
  border-radius: 50%;
  animation: hudspin 12s linear infinite;
  opacity:0.32;
  box-shadow: 0 0 26px var(--brand-accent-a);
}
@keyframes hudspin { from{transform: rotate(0deg);} to{transform: rotate(360deg);} }

/* Partners orbit */
.orbit-zone { position: relative; min-height: 420px; }
.orbit-core {
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(255,255,255,0.16);
  border: 1px solid var(--brand-accent);
  border-radius: 16px;
  padding: 18px;
  box-shadow: 0 0 30px var(--brand-soft-a);
  z-index: 3;
  transition: background var(--theme-transition), box-shadow var(--theme-transition), border-color var(--theme-transition);
}
.orbit-path {
  position: absolute;
  inset: 12%;
  border: 1px dashed rgba(255,255,255,0.2);
  border-radius: 50%;
}
.orbit-item {
  position: absolute;
  top: 50%; left: 50%;
  transform-origin: -140px 0;
  animation: orbit-spin 12s linear infinite;
}
.orbit-item:nth-child(2) { animation-duration: 14s; }
.orbit-item:nth-child(3) { animation-duration: 16s; }
.orbit-item:nth-child(4) { animation-duration: 18s; }
@keyframes orbit-spin {
  from { transform: rotate(0deg) translate(-140px) rotate(0deg); }
  to   { transform: rotate(360deg) translate(-140px) rotate(-360deg); }
}
.orbit-card { width: 150px; height: 90px; perspective: 800px; }
.orbit-card .flip { min-height: 90px; }

.nav-pills .nav-link { border:1px solid rgba(255,255,255,0.12); color: var(--text-light); transition: background var(--theme-transition), border-color var(--theme-transition), color var(--theme-transition), box-shadow var(--theme-transition); }
.nav-pills .nav-link.active {
  background: var(--brand-primary);
  border-color: var(--brand-accent);
  color: #0b0d17;
  box-shadow: 0 0 0 1px var(--brand-accent), 0 0 28px var(--brand-accent-a);
}

.btn-primary {
  background: var(--brand-primary);
  border-color: var(--brand-accent);
  box-shadow: 0 12px 26px rgba(0,0,0,0.16), 0 0 34px var(--brand-accent-a);
  transition: background var(--theme-transition), border-color var(--theme-transition), box-shadow var(--theme-transition), filter var(--theme-transition);
}
.btn-primary:hover {
  background: var(--brand-accent);
  border-color: var(--brand-accent);
  box-shadow: 0 12px 26px rgba(0,0,0,0.14), 0 0 42px var(--brand-accent-a);
}
.btn-outline-light { border-color: rgba(255,255,255,0.6); transition: border-color .3s ease, color .3s ease, background .3s ease; }
.btn-outline-light:hover { border-color: var(--brand-accent); color: var(--text-light); background: rgba(255,255,255,0.08); }

.contact-card {
  border: 1px solid var(--glass-brd);
  padding: 14px;
  border-radius: 12px;
  background: var(--glass-bg);
}
.contact-scene {
  background:
    radial-gradient(800px 520px at 20% 20%, var(--brand-soft-a), transparent 60%),
    radial-gradient(700px 480px at 80% 30%, rgba(255,255,255,0.10), transparent 55%),
    linear-gradient(180deg, var(--surface-contact-a), var(--surface-contact-b));
  position: relative;
  overflow: hidden;
  transition: background var(--theme-transition);
}
.contact-scene::after {
  content:"";
  position:absolute;
  inset:0;
  background: linear-gradient(180deg, transparent 70%, rgba(0,0,0, calc(var(--overlay-strength) * 1.9)) 100%);
  pointer-events:none;
  z-index:0;
  transition: background var(--theme-transition);
}
.sticky-cta {
  position: fixed;
  bottom: 18px;
  left: 18px;
  display: flex;
  gap: 10px;
  z-index: 99;
  opacity: 0;
  transform: translateY(12px);
  transition: opacity .4s ease, transform .4s ease;
}
.sticky-cta.show { opacity: 1; transform: translateY(0); }
.letterbox::before, .letterbox::after{
  content:""; position:fixed; left:0; right:0; height:40px; z-index:9999;
  background: rgba(0,0,0, calc(var(--overlay-strength) * 2.05));
  pointer-events:none;
  opacity:.0;
  transition: opacity .6s ease, background var(--theme-transition);
}
.letterbox::before{ top:0; } .letterbox::after{ bottom:0; }
body.cinema .letterbox::before, body.cinema .letterbox::after{ opacity:1; }
.brand-reset-btn {
  position: fixed;
  top: 92px;
  right: 18px;
  z-index: 120;
  padding: 10px 12px;
  border-radius: 12px;
  background: linear-gradient(135deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06));
  border: 1px solid var(--glass-brd);
  color: var(--text-light);
  font-size: 0.85rem;
  letter-spacing: 0.2px;
  box-shadow: 0 14px 30px rgba(0,0,0,0.22), 0 0 28px var(--brand-accent-a);
  backdrop-filter: blur(12px);
  transition: background var(--theme-transition), border-color var(--theme-transition), box-shadow var(--theme-transition), transform .2s ease, color var(--theme-transition);
}
.brand-reset-btn:hover {
  transform: translateY(-2px);
  border-color: var(--brand-accent);
  box-shadow: 0 14px 30px rgba(0,0,0,0.20), 0 0 38px var(--brand-accent-a);
}
.brand-reset-btn:active { transform: translateY(0); }

[data-brand] { position: relative; }
[data-brand]:not(#hero)::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: 0;
  background:
    radial-gradient(900px 640px at 16% 18%, var(--brand-soft-a), transparent 60%),
    radial-gradient(760px 560px at 85% 28%, var(--brand-accent-a), transparent 55%),
    linear-gradient(135deg, var(--brand-bg1), var(--brand-bg2));
  transition: opacity var(--theme-transition);
}
[data-brand][data-brand-active="true"]:not(#hero)::before { opacity: 1; }
[data-brand] > .container, [data-brand] > .container-fluid { position: relative; z-index: 2; }

body.reduced-motion .floating-orb,
body.reduced-motion .orbit-card::after,
body.reduced-motion .hud-rotate::after,
body.reduced-motion .pulse-line,
body.reduced-motion .ticker {
  animation: none !important;
}
body.reduced-motion .flip,
body.reduced-motion .reveal,
body.reduced-motion .brand-pill,
body.reduced-motion .btn,
body.reduced-motion .glass {
  transition-duration: 0.01ms !important;
}
.was-validated .form-control:invalid, .form-control.is-invalid {
  border-color: #ff6b6b;
  box-shadow: none;
}

@media (max-width: 991px) {
  body { padding-top: 72px; }
  .chapter-indicator { display:none; }
}
@media (max-width: 767px) {
  .section-block { padding: 90px 0; }
}
